!function(){"use strict";function a(e,t){for(var n=[],o=[],r=arguments.length,i=Array(2<r?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];for(var s=i.length,u=void 0;0<s--;)n.push(i[s]);for(t&&t.key&&(u=t.key,delete t.key);n.length;){var l=n.pop();if(l&&l.pop)for(s=l.length;s--;)n.push(l[s]);else null!=l&&!0!==l&&!1!==l&&o.push(l)}return"function"==typeof e?e(t||{},o):{type:e,props:t||{},children:o,key:u}}var b=function(e){return e?e.key:null};function k(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=t[r];return n}function w(e,t,n,o,r){var i,a,s,u,l;"key"!==t&&"onComponentDidMount"!==t&&"onComponentDidUpdate"!==t&&"onComponentWillUnmount"!==t&&("style"===t&&"string"!=typeof n?function(e,t,n,o){for(var r in k(o,n)){var i=null==n||null==n[r]?"":n[r];"-"===r[0]?e[t].setProperty(r,i):e[t][r]=i}}(e,t,n,o):(t=t.toLowerCase(),"classname"===(l=t)&&(l="class"),s=e,u=n,"dangerouslysetinnerhtml"===(t=l)&&(s.innerHTML=u),t in e&&"list"!==t&&!r?e[t]="no"==n?"":n:null!=n&&"null"!==n&&"false"!==n&&"no"!==n&&"off"!==n&&("xlink-href"===t?(a=n,(i=e).setAttributeNS("http://www.w3.org/1999/xlink","href",a),i.setAttribute("href",a)):("true"===n&&(n=""),"dangerouslysetinnerhtml"!==t&&e.setAttribute(t,n))),null!=n&&"null"!==n&&"undefined"!==n&&"false"!==n&&"no"!==n&&"off"!==n||e.removeAttribute(t)))}var S=function(e,t,n){e.removeChild(function e(t,n){if(n.props)for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);return t}(t,n)),n&&n.props&&n.props.onComponentDidUnmount&&n.props.onComponentDidUnmount.call(n.props.onComponentDidUnmount,e)};function C(e,t,n,o,r){if(o!==n){if(null==n||n.type!==o.type){var i=function e(t,n){var o=void 0;"number"==typeof t&&(t=t.toString()),o="string"==typeof t?document.createTextNode(t):(n=n||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);var r=t.props;if(r){for(var i=0;i<t.children.length;i++)o.appendChild(e(t.children[i],n));for(var a in r)w(o,a,r[a],null,n)}return o}(o,r);e&&(e.insertBefore(i,t),null!=n&&S(e,t,n)),t=i}else if(null==n.type)t.nodeValue=o;else{!function(e,t,n,o){for(var r in k(t,n))n[r]!==("value"===r||"checked"===r?e[r]:t[r])&&w(e,r,n[r],t[r],o);e.mounted&&n&&n.onComponentDidUpdate&&n.onComponentDidUpdate.call(n.onComponentDidUpdate,t,n,e)}(t,n.props,o.props,r=r||"svg"===o.type);for(var a={},s={},u=[],l=n.children,c=o.children,h=0;h<l.length;h++){u[h]=t.childNodes[h];var d=b(l[h]);null!=d&&(a[d]=[u[h],l[h]])}for(var p=0,f=0;f<c.length;){var m=b(l[p]),v=b(c[f]);if(s[m])p++;else if(null==v||v!==b(l[p+1]))if(null==v)null==m&&(C(t,u[p],l[p],c[f],r),f++),p++;else{var y=a[v]||[];m===v?(C(t,y[0],y[1],c[f],r),p++):y[0]?C(t,t.insertBefore(y[0],u[p]),y[1],c[f],r):C(t,u[p],null,c[f],r),s[v]=c[f],f++}else null==m&&S(t,u[p],l[p]),p++}for(;p<l.length;)null==b(l[p])&&S(t,u[p],l[p]),p++;for(var g in a)s[g]||S(t,a[g][0],a[g][1])}return t}}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=(function(){function l(e){this.value=e}function e(r){var i,a;function s(e,t){try{var n=r[e](t),o=n.value;o instanceof l?Promise.resolve(o.value).then(function(e){s("next",e)},function(e){s("throw",e)}):u(n.done?"return":"normal",n.value)}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?s(i.key,i.arg):a=null}this._invoke=function(o,r){return new Promise(function(e,t){var n={key:o,arg:r,resolve:e,reject:t,next:null};a?a=a.next=n:(i=a=n,s(o,r))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),m=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),n=window&&window.requestAnimationFrame||window&&window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function o(e){return!Array.isArray(e)&&"object"===(void 0===e?"undefined":p(e))}var r=(new Date).getTime(),t=function(){function t(e){f(this,t),e||(e={}),this.props=e,this.selector=e.container||"body",e.render&&(this.render=e.render),e.state&&(this.state=e.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,e.componentWillMount&&(this.componentWillMount=e.componentWillMount),e.componentDidMount&&(this.componentDidMount=e.componentDidMount),e.componentWillUpdate&&(this.componentWillUpdate=e.componentWillUpdate),e.componentDidUpdate&&(this.componentDidUpdate=e.componentDidUpdate),e.componentWillUnmount&&(this.componentWillUnmount=e.componentWillUnmount)}return m(t,[{key:"componentWillMount",value:function(e){return e}},{key:"componentDidMount",value:function(e){return e}},{key:"componentWillUpdate",value:function(e){return e}},{key:"componentDidUpdate",value:function(e){return e}},{key:"componentWillUnmount",value:function(e){return e}},{key:"render",value:function(e){return e}},{key:"setState",value:function(e){if("function"==typeof e){var t=e.call(this,this.state);t&&(this.state=t)}else if(o(this.state)&&o(e)){var n=this.state;this.state=k(n,e)}else this.state=e}},{key:"update",value:function(e){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var t=this.state;!0!==e&&e&&(t=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(t),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var r=this.element&&this.element.node;if(i=r,a=t,!(s=this)||JSON.stringify(i)!==JSON.stringify(s.render(a))){var i,a,s,u,l;if(this.element=(u=this.render(t),(l=this.element)?C(l.parentNode,l,l&&l.node,u):l=C(null,null,null,u),l.node=u,l),!this.mounted)return this.componentWillMount&&this.componentWillMount(this),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount(this));this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&this.componentDidUpdate(this)}}}},{key:"unmount",value:function(){var t=this;if(this.element){for(var e in this.componentWillUnmount&&this.componentWillUnmount(this),["change","click","dblclick","input","keydown","keypress","keyup","mousedown","mouseleave","mouseout","mouseover","mouseup","pointercancel","pointerdown","pointermove","pointerup","select","submit","touchcancel","touchend","touchmove","touchstart"].map(function(e){t.element.removeEventListener(e,t)}),this.container.removeChild(this.element),this.container=void 0,this)delete this[e];delete this.state,this.update=void 0,this.unmount=void 0}}},{key:"state",get:function(){return this[r]},set:function(e){var t=this;this[r]=e,n(function(){return t.update()})}}]),t}();function s(e){var t=e.search,n=e.searchResults,o=e.blurSearchInput;return a("div",{id:"search-component"},a("h4",null,"Hero Search"),a("input",{id:"search-box",onkeyup:function(e){return t(e)},onblur:function(){return o()}}),0<n.length&&a("ul",{class:"search-result"},n.map(function(e){return a("li",null,a("a",{href:"#/detail/"+e.id},e.name))})))}function i(e){var t=e.heroes,n=e.search,o=e.searchResults,r=e.blurSearchInput,i=t.slice(1,5);return a("div",{class:"dashboard"},a("h3",null,"Top Heroes"),a("div",{class:"grid grid-pad"},i.map(function(e){return a("a",{class:"col-1-4",href:"#/detail/"+e.id},a("div",{class:"module hero"},a("h4",null,e.name)))})),a(s,{search:n,searchResults:o,blurSearchInput:r}))}function u(e){var t=e.heroes,n=e.deleteItem,o=e.addHero;return a("div",null,a("p",{class:"form--add-hero"},a("label",{htmlFor:"add-hero"},"Hero name: "),a("input",{id:"add-hero",type:"text"}),a("button",{onclick:o},"Add")),a("ul",{class:"heroes"},t.map(function(e){return a("li",null,a("a",{href:"#/detail/"+e.id},a("span",{class:"badge"},e.id),a("span",{class:"hero-link"},e.name)),a("button",{"data-id":e.id,class:"delete",title:"delete hero",onclick:function(e){return n(e)}},"x"))})))}function l(e){var t=e.hero,n=e.onHeroNameChange,o=e.resetName,r=e.saveName;return a("div",{id:"hero-detail"},a("h2",null,t.name," details!"),a("div",null,a("label",null,"id:")," ",t.id),a("div",null,a("label",{for:"update-name"},"name: "),a("input",{id:"update-name",placeholder:t.name,oninput:function(e){return n(e)}})),a("p",{class:"hero-detail--buttons"},a("button",{onclick:o},"Reset"),a("button",{onclick:r},"Save")))}function e(e,t){var u=[],i={},n="router",o=window[n],l=void 0,a=function(){function n(e,t){f(this,n),this.name=t,this.path=e,this.keys=[],this.fns=[],this.params={},this.pathToRegexp=function(e,a,t,n){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(n?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,t,n,o,r,i){return a.push({name:o,optional:!!i}),t=t||"",(i?"":t)+"(?:"+(i?t:"")+(n||"")+(r||n&&"([^/.]+?)"||"([^/]+?)")+")"+(i||"")}).replace(/([/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",t?"":"i"))},this.regex=this.pathToRegexp(this.path,this.keys,!1,!1)}return m(n,[{key:"addHandler",value:function(e){this.fns.push(e)}},{key:"removeHandler",value:function(e){for(var t=0,n=this.fns.length;t<n;t++){if(e==this.fns[t])return void this.fns.splice(t,1)}}},{key:"run",value:function(e){for(var t=0,n=this.fns.length;t<n;t++)if(!1===this.fns[t].apply(this,e))return!1;return!0}},{key:"match",value:function(e,t){var n=this.regex.exec(e);if(!n)return!1;for(var o=1,r=n.length;o<r;++o){var i=this.keys[o-1],a="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];i&&(this.params[i.name]=a),t.push(a)}return!0}}]),n}(),c=function e(t,n){var o=function(e,t){var n=e.split(" "),o=2==n.length?n[0]:null;e=2==n.length?n[1]:n[0],i[e]||(i[e]=new a(e,o),u.push(i[e])),i[e].addHandler(t)};if("function"==typeof n)o(t,n),e.reload();else if("object"==(void 0===t?"undefined":p(t))){for(var r in t)o(r,t[r]);e.reload()}else void 0===n&&e.navigate(t)};c.remove=function(e,t){var n=i[e];n&&n.removeHandler(t)},c.removeAll=function(){i={},u=[],l=""},c.navigate=function(e,t){var n=(t=t||{}).silent||!1;n&&d(),setTimeout(function(){window.location.hash=e,n&&setTimeout(function(){return s()},1)},1)},c.noConflict=function(){return e[n]=o,c},c.load=function(e){i[e].run()};var h=function(){return window.location.hash.substring(1)},r=c.reload=function(){for(var e,t,n,o=h(),r=0,i=u.length;r<i;r++){var a=u[r],s=(e=o,void 0,n=[],(t=a).match(e,n)?!1!==t.run(n)?1:0:-1);if(1===s){l=o;break}if(0===s){c.navigate(l,{silent:!0});break}}},s=function(){e.addEventListener?e.addEventListener("hashchange",r,!1):e.attachEvent("onhashchange",r)},d=function(){e.removeEventListener?e.removeEventListener("hashchange",r):e.detachEvent("onhashchange",r)};if(s(),l=h(),t)return c;e[n]=c}new t({container:"header",state:"Tour of Heroes",render:function(e){return a("h1",null,a("a",{href:"/"},e))}}),new t({container:"section",state:!0,render:function(e){return a("nav",null,a("ul",null,a("li",null,a("a",{href:"#/dashboard"},"Dashboard")),a("li",null,a("a",{href:"#/heroes"},"Heroes"))))}}),"undefined"==typeof module?e(window):(module.exports=e(window,!0),module.exports.default=module.exports);new(function(e){function n(e){f(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.container="section",t.state={activeComponent:"dashboard",heroes:[],selectedHero:"",searchResults:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),m(n,[{key:"render",value:function(e){return a("div",{class:"app-root"},"dashboard"===e.activeComponent&&a(i,{heroes:this.state.heroes,search:this.search.bind(this),searchResults:this.state.searchResults,blurSearchInput:this.blurSearchInput.bind(this)}),"heroes"===e.activeComponent&&a(u,{heroes:this.state.heroes,deleteItem:this.deleteItem.bind(this),addHero:this.addHero.bind(this)}),"detail"===e.activeComponent&&a(l,{hero:this.state.selectedHero,deleteItem:this.deleteItem,onHeroNameChange:this.onHeroNameChange.bind(this),resetName:this.resetName.bind(this),saveName:this.saveName.bind(this)}))}},{key:"componentDidMount",value:function(){var r,t=this;fetch("/dev/data/mock-heroes.js").then(function(e){return e.json()}).then(function(e){t.setState({heroes:e})}),r=this,router({"/":function(){r.setState({activeComponent:"dashboard"})},"/dashboard":function(){r.setState({activeComponent:"dashboard"})},"/heroes":function(){r.setState({activeComponent:"heroes"})},"/detail/:id":function(t){var e=r.state,n=e.heroes.findIndex(function(e){return e.id===t}),o=e.heroes[n];try{o.originalName=o.name,r.setState({activeComponent:"detail",selectedHero:o})}catch(e){}}})}},{key:"addHero",value:function(e){var t=e.target.parentNode.querySelector("#add-hero"),n=t.value;if(n){var o=this.state.heroes[this.state.heroes.length-1].id,r={id:String(parseInt(o)+1),name:n},i=this.state.heroes;i.push(r),this.setState({heroes:i}),t.value=""}}},{key:"deleteItem",value:function(e){var t=e.target.dataset.id,n=this.state.heroes,o=n.findIndex(function(e){return t==e.id});n.splice(o,1),this.setState({heroes:n})}},{key:"onHeroNameChange",value:function(e){var t=e.target.value;if(t){var n=this.state.selectedHero;n.name=t,this.setState({selectedHero:n})}}},{key:"resetName",value:function(e){var t=this.state.selectedHero;t.name=t.originalName,this.setState({selectedHero:t})}},{key:"saveName",value:function(e){window.location.hash="#/heroes"}},{key:"search",value:function(e){var t=e.target.value,n=this.state.heroes.filter(function(e){return e.name.toLowerCase().match(t.toLowerCase())});this.setState({searchResults:n})}},{key:"blurSearchInput",value:function(e){var t=this;setTimeout(function(){t.setState({searchResults:[]})},250)}}]),n}())}();
//# sourceMappingURL=app.js.map
