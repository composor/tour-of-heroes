!function(){"use strict";function e(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];for(var i=void 0,a=[];o.length;)Array.isArray(i=o.shift())?i.map(function(e){return o.push(e)}):null!=i&&"boolean"!=typeof i&&("number"==typeof i&&(i+=""),a.push(i));return"string"==typeof e?{type:e,props:t||{},children:a}:e(t||{},a)}function t(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=t[r];return n}function n(e,n,o,r){if("key"===n);else if("style"===n)for(var i in t(r,o=o||{}))e.style[i]=String(o[i])||"";else{try{0===o&&(o=String(o)),e[n]=o}catch(e){}"function"!=typeof o&&(o?"xlink-href"===n?(e.setAttributeNS("http://www.w3.org/1999/xlink","href",o),e.setAttribute("href",o)):e.setAttribute(n,o):e.removeAttribute(n))}}function o(e,t){return"string"==typeof e?document.createTextNode(e):function(e,t){var r=(t=t||"svg"===e.type)?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type);return Object.keys(e.props).forEach(function(t){return n(r,t,e.props[t])}),e.children.map(function(e){return r.appendChild(o(e,t))}),r}(e,t)}function r(e){if(e&&e.props)return e.props.key}function i(e,a,s,u,l,c){if(null==s)a=e.insertBefore(o(u,l),a);else if(null!=u.type&&u.type===s.type){!function(e,o,r){Object.keys(t(o,r)).forEach(function(t){var i=r[t],a="value"===t||"checked"===t?e[t]:o[t];i!==a&&n(e,t,i,a)})}(a,s.props,u.props),l=l||"svg"===u.type;for(var d=u.children.length,f=s.children.length,p={},m=[],v={},y=0;y<f;){var b=m[y]=a.childNodes[y],g=s.children[y],w=r(g);null!=w&&(p[w]=[b,g]),y++}for(var k=0,S=0;S<d;){var C=m[k],N=s.children[k],x=u.children[S],H=r(N);if(v[H])k++;else{var E=r(x),W=p[E]||[];null==E?(null==H&&(i(a,C,N,x,l),S++),k++):(H===E?i(a,W[0],W[1],x,l)&&k++:W[0]?a.insertBefore(W[0],C)&&i(a,W[0],W[1],x,l):i(a,C,null,x,l),v[E]=x,S++)}}for(;k<f;){null==r(s.children[k])&&h(a,m[k]),k++}Object.keys(p).forEach(function(e){var t=p[e],n=t[1];v[n.props.key]||h(a,t[0])})}else a&&u!==a.nodeValue&&("string"==typeof u&&"string"==typeof s?a.nodeValue=u:(a=e.insertBefore(o(u,l),c=a),h(e,c,s.data)));return a}function a(t){var n=t.search,o=t.searchResults,r=t.blurSearchInput;return e("div",{id:"search-component"},e("h4",null,"Hero Search"),e("input",{id:"search-box",onkeyup:function(e){return n(e)},onblur:function(){return r()}}),o.length>0&&e("ul",{class:"search-result"},o.map(function(t){return e("li",null,e("a",{href:"#/detail/"+t.id},t.name))})))}function s(t){var n=t.heroes,o=t.search,r=t.searchResults,i=t.blurSearchInput,s=n.slice(1,5);return e("div",{class:"dashboard"},e("h3",null,"Top Heroes"),e("div",{class:"grid grid-pad"},s.map(function(t){return e("a",{class:"col-1-4",href:"#/detail/"+t.id},e("div",{class:"module hero"},e("h4",null,t.name)))})),e(a,{search:o,searchResults:r,blurSearchInput:i}))}function u(t){var n=t.heroes,o=t.deleteItem,r=t.addHero;return e("div",null,e("p",{class:"form--add-hero"},e("label",{htmlFor:"add-hero"},"Hero name: "),e("input",{id:"add-hero",type:"text"}),e("button",{onclick:r},"Add")),e("ul",{class:"heroes"},n.map(function(t){return e("li",null,e("a",{href:"#/detail/"+t.id},e("span",{class:"badge"},t.id),e("span",{class:"hero-link"},t.name)),e("button",{"data-id":t.id,class:"delete",title:"delete hero",onclick:function(e){return o(e)}},"x"))})))}function l(t){var n=t.hero,o=t.onHeroNameChange,r=t.resetName,i=t.saveName;return e("div",{id:"hero-detail"},e("h2",null,n.name," details!"),e("div",null,e("label",null,"id:")," ",n.id),e("div",null,e("label",{for:"update-name"},"name: "),e("input",{id:"update-name",placeholder:n.name,oninput:function(e){return o(e)}})),e("p",{class:"hero-detail--buttons"},e("button",{onclick:r},"Reset"),e("button",{onclick:i},"Save")))}function c(e,t){var n=[],o={},r=window.router,i=void 0,a=function(){function e(t,n){p(this,e),this.name=n,this.path=t,this.keys=[],this.fns=[],this.params={},this.pathToRegexp=function(e,t,n,o){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(o?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,o,r,i,a){return t.push({name:r,optional:!!a}),n=n||"",(a?"":n)+"(?:"+(a?n:"")+(o||"")+(i||o&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))},this.regex=this.pathToRegexp(this.path,this.keys,!1,!1)}return m(e,[{key:"addHandler",value:function(e){this.fns.push(e)}},{key:"removeHandler",value:function(e){for(var t=0,n=this.fns.length;t<n;t++){if(e==this.fns[t])return void this.fns.splice(t,1)}}},{key:"run",value:function(e){for(var t=0,n=this.fns.length;t<n;t++)if(!1===this.fns[t].apply(this,e))return!1;return!0}},{key:"match",value:function(e,t){var n=this.regex.exec(e);if(!n)return!1;for(var o=1,r=n.length;o<r;++o){var i=this.keys[o-1],a="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];i&&(this.params[i.name]=a),t.push(a)}return!0}},{key:"toURL",value:function(e){var t=this.path;for(var n in e)t=t.replace("/:"+n,"/"+e[n]);if(-1!=(t=t.replace(/\/:.*\?/g,"/").replace(/\?/g,"")).indexOf(":"))throw new Error("missing parameters for url: "+t);return t}}]),e}(),s=function e(t,r){var i=function(e,t){var r=e.split(" "),i=2==r.length?r[0]:null;e=2==r.length?r[1]:r[0],o[e]||(o[e]=new a(e,i),n.push(o[e])),o[e].addHandler(t)};if("function"==typeof r)i(t,r),e.reload();else if("object"==(void 0===t?"undefined":f(t))){for(var s in t)i(s,t[s]);e.reload()}else void 0===r&&e.navigate(t)};s.lookup=function(e,t){for(var o=0,r=n.length;o<r;o++){var i=n[o];if(i.name==e)return i.toURL(t)}},s.remove=function(e,t){var n=o[e];n&&n.removeHandler(t)},s.removeAll=function(){o={},n=[],i=""},s.navigate=function(e,t){var n=(t=t||{}).silent||!1;n&&d(),setTimeout(function(){window.location.hash=e,n&&setTimeout(function(){h()},1)},1)},s.noConflict=function(){return e.router=r,s};var u=function(){return window.location.hash.substring(1)},l=function(e,t){var n=[];return t.match(e,n)?!1!==t.run(n)?1:0:-1},c=s.reload=function(){for(var e=u(),t=0,o=n.length;t<o;t++){var r=n[t],a=l(e,r);if(1===a){i=e;break}if(0===a){s.navigate(i,{silent:!0});break}}},h=function(){e.addEventListener?e.addEventListener("hashchange",c,!1):e.attachEvent("onhashchange",c)},d=function(){e.removeEventListener?e.removeEventListener("hashchange",c):e.detachEvent("onhashchange",c)};if(h(),i=u(),t)return s;e.router=s}var h=function(e,t){return e.removeChild(t)},d=function(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&Object.defineProperty(e,n,{value:t[n],writable:!0,enumerable:!1,configurable:!0})})},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=(function(){function e(e){this.value=e}function t(t){function n(r,i){try{var a=t[r](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};i?i=i.next=s:(r=i=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)},b=(new Date).getTime(),g=function(){function e(t){p(this,e),t||(t={}),this.selector=t.container||t.root||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.oldNode=null,this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,t.beforeCreateComponent&&(this.beforeCreateComponent=t.beforeCreateComponent),(t.componentWillMount||this.componentWillMount)&&(this.beforeCreateComponent=t.componentWillMount||this.componentWillMount),t.componentWasCreated&&(this.componentWasCreated=t.componentWasCreated),(t.componentDidMount||this.componentDidMount)&&(this.componentWasCreated=t.componentDidMount||this.componentDidMount),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return m(e,[{key:"setState",value:function(e,t){if("function"==typeof e){var n=e.call(this,this.state);"function"!=typeof n&&n&&this.setState(n)}if(Array.isArray(this.state)){var o=this.state;t||0===t?"object"===f(o[t])?(d(o[t],e),this.state=o):(o[t]=e,this.state=o):this.state=o}else if("object"===f(this.state)){var r=this.state;d(r,e),this.state=r}else this.state=e}},{key:"update",value:function(e){function t(e){try{return JSON.stringify(this.oldNode)!==JSON.stringify(o(e))}catch(e){return!0}}if(this.render&&(this.componentShouldUpdate||!this.mounted)){var n=this.state;!0!==e&&e&&(n=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var o=this.render,r=this.render(n),a=void 0;if(r&&r.props&&r.props.id)try{a=this.container.querySelector("#"+r.props.id)}catch(e){}if(a&&!this.mounted&&a.parentNode.removeChild(a),this.element=function(e,t,n,o){return i(o||document.body,n,e,t)}(this.oldNode,this.oldNode=this.render(n),this.element,this.container),!(this.mounted&&this.oldNode&&t(n)))return this.beforeCreateComponent&&this.beforeCreateComponent(this),this.componentWasCreated&&this.componentWasCreated(this),void(this.mounted=!0);this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&t(n)&&this.componentDidUpdate(this)}}},{key:"unmount",value:function(){var e=this;if(this.element){this.componentWillUnmount&&this.componentWillUnmount(this),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mouseover","mouseleave","select","input","change","keydown","keypress","keyup","submit"].map(function(t){e.element.removeEventListener(t,e)}),this.container.removeChild(this.element),this.container=void 0;for(var t in this)delete this[t];delete this.state,this.update=void 0,this.unmount=void 0}}},{key:"state",set:function(e){var t=this;this[b]=e,y(function(){return t.update()})},get:function(){return this[b]}}]),e}();window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=void 0,o=this;do{for(n=t.length;--n>=0&&t.item(n)!==o;);}while(n<0&&(o=o.parentElement));return o}),new g({container:"header",state:"Tour of Heroes",render:function(t){return e("h1",null,e("a",{href:"/"},t))}}),new g({container:"section",state:!0,render:function(t){return e("nav",null,e("ul",null,e("li",null,e("a",{href:"#/dashboard"},"Dashboard")),e("li",null,e("a",{href:"#/heroes"},"Heroes"))))}}),"undefined"==typeof module?c(window):(module.exports=c(window,!0),module.exports.default=module.exports);new(function(t){function n(e){p(this,n);var t=v(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.container="section",t.state={activeComponent:"dashboard",heroes:[],selectedHero:"",searchResults:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,g),m(n,[{key:"render",value:function(t){return e("div",{class:"app-root"},"dashboard"===t.activeComponent&&e(s,{heroes:this.state.heroes,search:this.search.bind(this),searchResults:this.state.searchResults,blurSearchInput:this.blurSearchInput.bind(this)}),"heroes"===t.activeComponent&&e(u,{heroes:this.state.heroes,deleteItem:this.deleteItem.bind(this),addHero:this.addHero.bind(this)}),"detail"===t.activeComponent&&e(l,{hero:this.state.selectedHero,deleteItem:this.deleteItem,onHeroNameChange:this.onHeroNameChange.bind(this),resetName:this.resetName.bind(this),saveName:this.saveName.bind(this)}))}},{key:"componentWasCreated",value:function(){var e=this;fetch("/dev/data/mock-heroes.js").then(function(e){return e.json()}).then(function(t){e.setState({heroes:t})}),function(e){router({"/":function(){e.setState({activeComponent:"dashboard"})},"/dashboard":function(){e.setState({activeComponent:"dashboard"})},"/heroes":function(){e.setState({activeComponent:"heroes"})},"/detail/:id":function(t){var n=e.state,o=n.heroes.findIndex(function(e){return e.id===t}),r=n.heroes[o];r.originalName=r.name,e.setState({activeComponent:"detail",selectedHero:r})}})}(this)}},{key:"addHero",value:function(e){var t=e.target.parentNode.querySelector("#add-hero"),n=t.value;if(n){var o=this.state.heroes[this.state.heroes.length-1].id,r={id:String(parseInt(o)+1),name:n},i=this.state.heroes;i.push(r),this.setState({heroes:i}),t.value=""}}},{key:"deleteItem",value:function(e){var t=e.target.dataset.id,n=this.state.heroes,o=n.findIndex(function(e){return t==e.id});n.splice(o,1),this.setState({heroes:n})}},{key:"onHeroNameChange",value:function(e){var t=e.target.value;if(t){var n=this.state.selectedHero;n.name=t,this.setState({selectedHero:n})}}},{key:"resetName",value:function(e){var t=this.state.selectedHero;t.name=t.originalName,this.setState({selectedHero:t})}},{key:"saveName",value:function(e){window.location.hash="#/heroes"}},{key:"search",value:function(e){var t=e.target.value,n=this.state.heroes.filter(function(e){return e.name.toLowerCase().match(t.toLowerCase())});this.setState({searchResults:n})}},{key:"blurSearchInput",value:function(e){var t=this;setTimeout(function(){t.setState({searchResults:[]})},250)}}]),n}())}();
//# sourceMappingURL=app.js.map
